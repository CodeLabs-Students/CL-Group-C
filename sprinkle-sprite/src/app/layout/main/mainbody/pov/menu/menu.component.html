
<main class="menu">
  <div class="menu-hero">
    <h2>Our Flavors</h2>
    <p>Choose your favorite sprinkle surprise!</p>
  </div>

  <!--
  -----Main container for the menu card grid.-----
  Holds the list of paginated cards and controls their layout and interaction.
-->
<div class="menu-content">

  <!--
    -----Card grid rendered via Angular's @for loop.-----
    Iterates over only the cards visible on the current page.
  -->
  <ul class="menu-list">
    @for (card of paginatedCards; track card.id) {

      <!--
        -----Individual card container.-----
        Clicking toggles the card's expanded state.
        The 'expanded' class is applied for styling.
      -->
      <li
        class="menu-item"
        [class.expanded]="card.expanded"
        (click)="toggleCard(card)"
      >
        <div class="card">
          <!--
            -----Card title and description.-----
            Tooltip included for overflow accessibility.
          -->
          <h3 [title]="card.title">{{ card.title }}</h3>
          <p [title]="card.description">{{ card.description }}</p>

          <!--
            -----Expanded info section.-----
            Only shown if the card is currently expanded.
          -->
          @if (card.expanded) {
            <div class="expanded-info">
              <p><strong>Price:</strong> ${{ card.price }}</p>
              <p><strong>Rarity:</strong> {{ card.rarity }}</p>

              <!--
                -----Rarity icon logic.-----
                Dynamically displays the correct image based on card.rarity.
              -->
              @if (card.rarity === "Uncommon") {
                <img class="icon" src="./assets/resources/vip_Icons/uncommon_Icon.png" alt="Uncommon" width="64" height="64" loading="lazy">
              }
              @else if (card.rarity === "Common") {
                <img class="icon" src="./assets/resources/vip_Icons/common_Icon.png" alt="Common" width="64" height="64" loading="lazy">
              }
              @else if (card.rarity === "Legendary") {
                <img class="icon" src="./assets/resources/vip_Icons/legendary_Icon.png" alt="Legendary" width="64" height="64" loading="lazy">
              }
              @else if (card.rarity === "Rare") {
                <img class="icon" src="./assets/resources/vip_Icons/epic_Icon.png" alt="Rare" width="64" height="64" loading="lazy">
              }
              @else if (card.rarity === "Seasonal") {
                <img class="icon" src="./assets/resources/vip_Icons/seasonal_Icon.png" alt="Seasonal" width="64" height="64" loading="lazy">
              }
            </div>
          }
        </div>

        <!--
          ➕➖ Card interaction controls.
          Includes increment/decrement buttons and add to cart.
          Uses stopPropagation to prevent click event from bubbling
          and accidentally toggling card expansion.
        -->
        <div class="card-controls" (click)="$event.stopPropagation()">
          <button (click)="decrease(card)" [disabled]="card.count === 0">−</button>
          <span>{{ card.count }}</span>
          <button (click)="cardService.increase(card)" [disabled]="card.count >= card.max">+</button>
          <button class="checkout-button" (click)="cartActions.addCardToCart(card)">Add to cart</button>
        </div>
      </li>
    }
  </ul>
</div>


    <!--
  -----Pagination controls for the menu view.-----
  - 'Previous' and 'Next' buttons navigate between pages.
  - Buttons are disabled when at the beginning or end of the card list.
  - Current page number is displayed between the buttons.
-->
<div class="pagination">
  <!-----Navigate to the previous page; disabled on the first page----->
  <button (click)="prevPage()" [disabled]="currentPage === 1">Previous</button>

  <!-----Display current page number----->
  <span>Page {{ currentPage }}</span>

  <!-----Navigate to the next page; disabled on the last page----->
  <button
    (click)="nextPage()"
    [disabled]="currentPage >= (cards.length / cardsPerPage)">
    Next
  </button>
</div>


</main>

